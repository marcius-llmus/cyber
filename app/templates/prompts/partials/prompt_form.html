<div class="prompt-form-container p-4 bg-dark-lighter rounded-md border-l-2 border-primary">
    <form
        {% if prompt %}
            hx-put="/prompts/{{ prompt.type|string|lower }}/{{ prompt.id }}"
            hx-target="closest .prompt-form-container"
            hx-swap="outerHTML"
        {% else %}
            hx-post="/prompts/{{ prompt_type|string|lower }}"
            hx-target="closest .space-y-2"
            hx-swap="afterbegin"
            hx-on::after-request="this.closest('.prompt-form-container').remove()"
        {% endif %}
        hx-ext="form-json"
    >
        <div class="space-y-3">
            <input type="text" name="name" placeholder="Prompt Name" value="{{ prompt.name if prompt else '' }}" class="w-full bg-dark-card border border-dark-light rounded-lg px-3 py-2 text-sm" required>
            <textarea name="content" placeholder="Prompt Content..." rows="4" class="w-full bg-dark-card border border-dark-light rounded-lg px-3 py-2 text-sm" required>{{ prompt.content if prompt else '' }}</textarea>

            <div class="flex justify-end space-x-2">
                <button type="button" class="px-3 py-1 bg-dark-light hover:bg-dark-light border border-dark-light rounded-lg text-xs"
                    data-action="restore-prompt-state"
                    {% if prompt %}
                        hx-get="/prompts/{{ prompt.type|string|lower }}/{{ prompt.id }}/view"
                        hx-target="closest .prompt-form-container"
                        hx-swap="outerHTML"
                    {% else %}
                        onclick="this.closest('.prompt-form-container').remove()"
                    {% endif %}>
                    Cancel
                </button>
                <button type="submit" class="px-3 py-1 bg-primary hover:bg-primary-dark rounded-lg text-xs font-medium text-white">{{ 'Save' if prompt else 'Create' }}</button>
            </div>
        </div>
    </form>
</div>
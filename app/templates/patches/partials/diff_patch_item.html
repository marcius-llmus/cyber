<div id="diff-patch-{{ internal_tool_call_id }}" class="rounded-lg border border-dark-lighter overflow-hidden my-1 shadow-sm">
    <div class="flex items-center justify-between px-4 py-2.5 cursor-pointer hover:bg-dark-light transition-colors duration-50 select-none bg-dark-lighter" data-action="toggle-expandable">
        <div class="flex items-center gap-2 pointer-events-none">
            <i class="fas fa-file-code text-primary text-sm"></i>
            <span class="text-sm font-mono text-gray-200">{{ file_path }}</span>
            {% if additions or deletions %}
            <div class="flex items-center gap-3 ml-4 text-[11px] font-mono">
                <span class="text-green-400">+{{ additions }}</span>
                <span class="text-red-400">-{{ deletions }}</span>
            </div>
            {% endif %}
            {% if tool_output %}
                <div id="diff-status-{{ internal_tool_call_id }}" class="ml-2 text-green-500">
                    <i class="fas fa-check text-xs"></i>
                </div>
            {% else %}
                <div id="diff-status-{{ internal_tool_call_id }}" class="ml-3 text-primary">
                    <i class="fas fa-circle-notch fa-spin text-xs"></i>
                </div>
            {% endif %}
        </div>
        <i class="fas fa-chevron-down text-gray-500 text-xs transition-transform duration-200 pointer-events-none"></i>
    </div>

    <div class="overflow-x-auto hidden rounded-none">
        <pre class="m-0 rounded-none"><code class="language-diff block whitespace-pre p-4 rounded-none">{{ diff }}</code></pre>
    </div>
</div>
{% from "components/modals/base_modal.html" import modal_shell %}

{% call modal_shell(modal_id='settings-modal', title='Settings', attributes='id="settings-modal-content"') %}
    <form
        id="settings-form"
        hx-post="/settings/"
        hx-target="#settings-form-container"
        hx-ext="form-json"
        hx-swap="innerHTML"
        data-close-modal
        class="flex flex-col flex-1 min-h-0"
    >
        <div id="settings-form-container"
             class="flex-1 flex flex-col min-h-0 modal-scroll-content"
             hx-get="/settings/form"
             hx-trigger="intersect, settingsSaved from:body"
             hx-swap="innerHTML">
            <div class="flex justify-center py-8">
                <i class="fas fa-circle-notch fa-spin text-primary text-2xl"></i>
            </div>
        </div>

        <div class="px-6 py-4 border-t border-dark-light flex justify-end space-x-3">
            <button type="button" data-modal-close class="px-4 py-2 bg-dark-lighter hover:bg-dark-light border border-dark-light rounded-lg text-sm">
                Cancel
            </button>
            <button type="submit" class="py-2 bg-primary hover:bg-primary-dark rounded-lg text-sm font-medium text-white w-[130px] h-9 flex items-center justify-center">
                <span>Save Changes</span>
                <span>{% include "components/icons/spinner.html" %}</span>
            </button>
        </div>
    </form>
{% endcall %}